<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="modulepreload" href="/gs-textbook-php/assets/manifest-3e21a0cd.js"/><link rel="modulepreload" href="/gs-textbook-php/assets/entry.client-DtWayQEr.js"/><link rel="modulepreload" href="/gs-textbook-php/assets/root-DhgomBNp.js"/><link rel="modulepreload" href="/gs-textbook-php/assets/entry.client-DtWayQEr.js"/><link rel="modulepreload" href="/gs-textbook-php/assets/lessons._slug-DdYyauY5.js"/><link rel="modulepreload" href="/gs-textbook-php/assets/mermaid-vendor-CpAEI21m.js"/><link rel="modulepreload" href="/gs-textbook-php/assets/lessons-CuJlLEab.js"/><meta name="robots" content="noindex"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><title>Lessons</title><meta name="robots" content="index,follow"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="icon" href="https://g-s.dev/uploads/cropped-g-s_fabicon-2-32x32.png" sizes="32x32"/><link rel="icon" href="https://g-s.dev/uploads/cropped-g-s_fabicon-2-192x192.png" sizes="192x192"/><link rel="apple-touch-icon" href="https://g-s.dev/uploads/cropped-g-s_fabicon-2-180x180.png"/><link href="https://fonts.googleapis.com/css2?family=M+PLUS+1p:wght@100;300;400;500;700;800;900&amp;display=swap" rel="stylesheet"/><link rel="stylesheet" href="/gs-textbook-php/assets/root-C_FDEAqU.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&amp;display=swap"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"/><script>
              window.Prism = window.Prism || {};
              window.Prism.manual = true;
            </script></head><body style="font-family:&#x27;M PLUS 1p&#x27;"><div class="relative from-slate-200 bg-gradient-to-b to-slate-300"><div class="grid transition-all duration-300 ease-in-out" style="grid-template-columns:280px 1fr"><aside class="h-screen sticky top-0 transition-all duration-300 ease-in-out w-[280px] pr-4 overflow-hidden border-r border-gray-200 dark:border-gray-800 bg-white dark:bg-slate-800 px-4"><div class="py-2"><div class="flex items-center justify-between mb-3"><h2 class="text-sm font-semibold transition-opacity duration-300 ease-in-out opacity-100">授業資料一覧</h2><button class="p-1 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors duration-200" title="折りたたみ"><svg class="w-4 h-4 transform transition-transform duration-300 ease-in-out" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button></div><div class="mb-3 px-2"><button class="flex items-center gap-2 w-full text-xs text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition-colors duration-200 py-2 px-2 rounded hover:bg-slate-100 dark:hover:bg-slate-700" title="全て開く"><svg class="w-3 h-3 transition-transform duration-200 " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg><span>全て開く</span></button></div><nav class="space-y-1 transition-opacity duration-300 ease-in-out opacity-100"></nav></div></aside><main class="prose dark:prose-invert max-w-none bg-white dark:bg-slate-800 rounded w-5xl p-12 my-4 
  mx-auto"><div class="relative"><div style="display:block"><h1 class="text-3xl font-extrabold mb-4 text-slate-900 dark:text-slate-100 border-b border-slate-200 dark:border-slate-700 pb-2">#05 PHP - データベース正規化・JOIN・Ajax実装</h1>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">今回のゴール</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">データモデリングの基礎を理解し、エンティティとリレーションシップでデータを整理できるようになる</li>
<li class="relative ml-2">ER図（エンティティ・リレーションシップ図）を読み書きできるようになる</li>
<li class="relative ml-2">データベース正規化（第1〜第3正規形）の概念を理解し、適切なテーブル設計を身につける</li>
<li class="relative ml-2">リレーション（1対1、1対多、多対多）を理解し、実際の設計に活用できるようになる</li>
<li class="relative ml-2">JOINを使って複数テーブルから関連データを取得する技術を習得する</li>
<li class="relative ml-2">GROUP BYによる集計・分析クエリを書けるようになる</li>
</ul></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">授業前準備</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><div class="my-6 p-4 rounded-lg border bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-green-800 dark:text-green-200">毎回の準備作業</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">今回はデータベース設計の基礎を学びます。ER図作成ツールの準備も行います。</p></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">1. XAMPP起動</strong></p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2"><strong class="font-semibold text-slate-900 dark:text-slate-100">Windows</strong>: Apache と MySQL が緑色</li>
<li class="relative ml-2"><strong class="font-semibold text-slate-900 dark:text-slate-100">Mac</strong>: MySQL Database と Apache Web Server が &quot;Running&quot;</li>
</ul><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">2. phpMyAdminの確認</strong></p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2"><code class="inline-block px-1.5 py-0.5 mx-0.5 text-sm font-mono bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded border border-slate-200 dark:border-slate-700">http://localhost/phpmyadmin/</code> にアクセス</li>
</ul><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">3. VSCode拡張機能のインストール</strong></p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">Draw.io Integration をインストール（ER図作成用）</li>
</ul></div></details>
<h2 class="text-2xl font-semibold mb-3 mt-12 text-slate-800 dark:text-slate-200">データベース設計・正規化の基礎</h2>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">なぜ正規化が必要なのか？</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><div class="my-6 p-4 rounded-lg border bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-blue-800 dark:text-blue-200">正規化の本質</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">正規化とは、<strong class="font-semibold text-slate-900 dark:text-slate-100">データの重複を排除し、データの整合性を保つ</strong>ためのデータベース設計手法です。</p></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">正規化を学ぶ重要性：</strong></p><div class="my-6 "><div class="infographic-content"><div class="space-y-3"><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-blue-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><div><div class="font-medium text-slate-800">データ整合性の確保</div><div class="text-sm text-slate-600">同じ情報が複数箇所で矛盾することを防ぐ</div></div></div><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-green-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><div><div class="font-medium text-slate-800">保守性の向上</div><div class="text-sm text-slate-600">データ変更時の影響範囲を最小化</div></div></div><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-orange-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h6l2 2h6a2 2 0 012 2v4a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path></svg></div><div><div class="font-medium text-slate-800">ストレージ効率</div><div class="text-sm text-slate-600">データ重複を排除し、容量を節約</div></div></div><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-purple-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path></svg></div><div><div class="font-medium text-slate-800">柔軟性の確保</div><div class="text-sm text-slate-600">新しい要件への対応が容易</div></div></div></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">問題のあるテーブル設計例</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">シナリオ：プログラミングスクールの学習管理システム</strong></p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">生徒がさまざまなコースを受講し、各コースには担当講師がいる状況を考えてみましょう。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">問題のある設計（非正規化テーブル）：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- student_course_bad テーブル（問題のある設計）
CREATE TABLE student_course_bad (
    id INT PRIMARY KEY AUTO_INCREMENT,
    student_name VARCHAR(64),
    student_email VARCHAR(256),
    student_phone VARCHAR(32),
    course_name VARCHAR(64),
    instructor_name VARCHAR(64),
    instructor_email VARCHAR(256),
    course_fee INT,
    enrollment_date DATE
);
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">サンプルデータ：</strong></p><div class="overflow-x-auto my-4"><table class="w-full border-collapse border border-slate-200 dark:border-slate-700"><thead class="bg-slate-50 dark:bg-slate-800"><tr class="border-b border-slate-200 dark:border-slate-700"><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">id</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">student_name</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">student_email</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">student_phone</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">course_name</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">instructor_name</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">instructor_email</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">course_fee</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">enrollment_date</th></tr></thead><tbody class="text-slate-700 dark:text-slate-300"><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">1</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:tanaka@example.com">tanaka@example.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">090-1234-5678</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">PHP基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:sato@school.com">sato@school.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">50000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-15</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤花子</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:sato@example.com">sato@example.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">080-9876-5432</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">JavaScript基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:tanaka@school.com">tanaka@school.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">45000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-16</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">3</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:tanaka@example.com">tanaka@example.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">090-1234-5678</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">React応用</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:sato@school.com">sato@school.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">60000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-17</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">4</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">鈴木一郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:suzuki@example.com">suzuki@example.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">070-1111-2222</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">PHP基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:sato@school.com">sato@school.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">50000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-18</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">5</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:tanaka@example.com">tanaka@example.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">090-1234-5678</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">JavaScript基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:tanaka@school.com">tanaka@school.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">45000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-20</td></tr></tbody></table></div><div class="my-6 p-4 rounded-lg border bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-yellow-800 dark:text-yellow-200">このテーブル設計の深刻な問題</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">このテーブルは「誰が」「いつ」「どのコースを受講したか」を記録していますが、多くの問題を抱えています。</p></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">データベース異常の詳細解説</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">非正規化テーブルが引き起こす4つの異常について詳しく見てみましょう：</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">1. データの重複異常</strong></p><div class="my-6 "><div class="infographic-content"><div class="p-4 bg-red-50 rounded border border-red-200"><div class="flex items-center mb-3"><div class="w-6 h-6 text-red-600 mr-2"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div class="font-medium text-red-800">データ重複の問題</div></div><div class="text-sm text-red-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>重複例：</strong><br/>
• 田中太郎の学生情報が3回記録<br/>
• 佐藤先生の講師情報が3回記録<br/>
• PHP基礎コースの情報が2回記録<br/>
<strong>問題：</strong> ストレージの無駄遣い、データの非効率性</p></div></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">2. 更新異常（Update Anomaly）</strong></p><div class="my-6 "><div class="infographic-content"><div class="p-4 bg-orange-50 rounded border border-orange-200"><div class="flex items-center mb-3"><div class="w-6 h-6 text-orange-600 mr-2"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></div><div class="font-medium text-orange-800">更新時の問題</div></div><div class="text-sm text-orange-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>問題例：</strong><br/>
佐藤先生のメールアドレスを変更する場合、3つの行を全て更新する必要がある<br/>
<strong>リスク：</strong> 更新し忘れると、同じ先生なのに異なるメールアドレスが記録される（データの不整合）</p></div></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">3. 挿入異常（Insert Anomaly）</strong></p><div class="my-6 "><div class="infographic-content"><div class="p-4 bg-yellow-50 rounded border border-yellow-200"><div class="flex items-center mb-3"><div class="w-6 h-6 text-yellow-600 mr-2"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div><div class="font-medium text-yellow-800">挿入時の問題</div></div><div class="text-sm text-yellow-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>問題例：</strong><br/>
• 新しいコース「Python基礎」を開設したいが、受講生がいない場合、コース情報だけを登録できない<br/>
• 新しい講師「山田先生」を雇ったが、担当コースがない場合、講師情報だけを登録できない<br/>
<strong>問題：</strong> 関連しないデータも一緒に登録しないといけない</p></div></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">4. 削除異常（Delete Anomaly）</strong></p><div class="my-6 "><div class="infographic-content"><div class="p-4 bg-purple-50 rounded border border-purple-200"><div class="flex items-center mb-3"><div class="w-6 h-6 text-purple-600 mr-2"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></div><div class="font-medium text-purple-800">削除時の問題</div></div><div class="text-sm text-purple-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>問題例：</strong><br/>
鈴木一郎が受講をやめてデータを削除すると、その行からしかわからないPHP基礎コースの情報も失われる<br/>
<strong>リスク：</strong> 必要な情報まで一緒に削除される</p></div></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">正規化の段階と実装</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">正規化の3段階：</strong></p><div class="my-6 p-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/30 dark:bg-slate-800/30"><div class="text-center text-slate-500 dark:text-slate-400 text-sm py-4">図表を読み込み中...</div><div class="text-center w-full flex justify-center hidden"></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">分かりやすい正規化の説明：</strong></p><div class="my-6 "><div class="infographic-content"><div class="space-y-3"><div class="flex items-start p-3 bg-blue-50 rounded border border-blue-200"><div class="w-6 h-6 text-blue-600 mr-3 mt-0.5"><div class="text-lg font-bold">1</div></div><div><div class="font-medium text-slate-800">第1正規形（1NF）</div><div class="text-sm text-slate-600">各マス（セル）には<strong>1つの情報だけ</strong>を入れよう！</div></div></div><div class="flex items-start p-3 bg-green-50 rounded border border-green-200"><div class="w-6 h-6 text-green-600 mr-3 mt-0.5"><div class="text-lg font-bold">2</div></div><div><div class="font-medium text-slate-800">第2正規形（2NF）</div><div class="text-sm text-slate-600"><strong>情報ごとにテーブルを分けよう！</strong>（部分関数従属性の排除）</div></div></div><div class="flex items-start p-3 bg-orange-50 rounded border border-orange-200"><div class="w-6 h-6 text-orange-600 mr-3 mt-0.5"><div class="text-lg font-bold">3</div></div><div><div class="font-medium text-slate-800">第3正規形（3NF）</div><div class="text-sm text-slate-600">情報が他の情報に<strong>間接的に依存しないようにしよう！</strong></div></div></div></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">正規化後のテーブル設計：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- 学生テーブル
CREATE TABLE students (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(64) NOT NULL,
    email VARCHAR(256) UNIQUE NOT NULL,
    phone VARCHAR(32)
);

-- 講師テーブル
CREATE TABLE instructors (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(64) NOT NULL,
    email VARCHAR(256) UNIQUE NOT NULL
);

-- コーステーブル
CREATE TABLE courses (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(64) NOT NULL,
    instructor_id INT NOT NULL,
    fee INT NOT NULL,
    FOREIGN KEY (instructor_id) REFERENCES instructors(id)
);

-- 受講テーブル（学生とコースの関連）
CREATE TABLE enrollments (
    id INT PRIMARY KEY AUTO_INCREMENT,
    student_id INT NOT NULL,
    course_id INT NOT NULL,
    enrollment_date DATE NOT NULL,
    FOREIGN KEY (student_id) REFERENCES students(id),
    FOREIGN KEY (course_id) REFERENCES courses(id)
);
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">ER図での関係性表現：</strong></p><div class="my-6 p-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/30 dark:bg-slate-800/30"><div class="text-center text-slate-500 dark:text-slate-400 text-sm py-4">図表を読み込み中...</div><div class="text-center w-full flex justify-center hidden"></div></div><div class="my-6 p-4 rounded-lg border bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-emerald-800 dark:text-emerald-200">ER図の読み方</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">ER図（Entity Relationship Diagram）は、テーブル間の関係性を視覚的に表現したものです。エンティティ（四角）とリレーションシップ（線）でデータベース構造を明確にします。</p></div></div></div></div></details>
<h2 class="text-2xl font-semibold mb-3 mt-12 text-slate-800 dark:text-slate-200">外部キー（Foreign Key）の理解</h2>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">外部キーとは何か？</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">外部キー</strong>とは、他のテーブルの主キーを参照する列のことです。テーブル同士の関連性を表現し、データの整合性を保つ重要な仕組みです。</p><div class="my-6 p-4 rounded-lg border bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-blue-800 dark:text-blue-200">外部キーの役割</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">外部キーは「このIDは、あのテーブルの特定の行を指しています」という関係性を明示します。</p></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">学習管理システムでの外部キー例：</strong></p><div class="my-6 "><div class="infographic-content"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="p-4 bg-blue-50 rounded border border-blue-200"><div class="font-medium text-blue-800 mb-2">courses テーブル</div><div class="text-sm text-blue-700 space-y-1"><div>id: 1, name: PHP基礎</div><div class="font-bold">instructor_id: 1 ← 外部キー</div><div>fee: 50000</div></div></div><div class="p-4 bg-green-50 rounded border border-green-200"><div class="font-medium text-green-800 mb-2">instructors テーブル</div><div class="text-sm text-green-700 space-y-1"><div class="font-bold">id: 1 ← 参照される主キー</div><div>name: 佐藤先生</div><div>email: <a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:sato@school.com">sato@school.com</a></div></div></div></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">外部キー制約の定義：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- コーステーブルで外部キー制約を設定
CREATE TABLE courses (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(64) NOT NULL,
    instructor_id INT NOT NULL,              -- これが外部キー
    fee INT NOT NULL,
    FOREIGN KEY (instructor_id) REFERENCES instructors(id)  -- 外部キー制約
);
</code></pre></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">外部キー制約の効果とメリット</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">参照整合性の保証：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- ❌ これは失敗する（instructor_id: 999 は存在しない）
INSERT INTO courses (name, instructor_id, fee)
VALUES (&#x27;Python基礎&#x27;, 999, 55000);
-- エラー: Cannot add or update a child row: a foreign key constraint fails

-- ✅ これは成功する（instructor_id: 1 は存在する）
INSERT INTO courses (name, instructor_id, fee)
VALUES (&#x27;Python基礎&#x27;, 1, 55000);
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">削除時の保護：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- ❌ これは失敗する（佐藤先生はコースを担当中）
DELETE FROM instructors WHERE id = 1;
-- エラー: Cannot delete or update a parent row: a foreign key constraint fails

-- まずコースの担当を変更してから削除する必要がある
UPDATE courses SET instructor_id = 2 WHERE instructor_id = 1;
DELETE FROM instructors WHERE id = 1;  -- これで削除可能
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">外部キーのメリット：</strong></p><div class="my-6 "><div class="infographic-content"><div class="space-y-3"><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-blue-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><div class="font-medium text-slate-800">データ整合性</div><div class="text-sm text-slate-600">存在しない講師IDでコースを作成できない</div></div></div><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-green-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></div><div><div class="font-medium text-slate-800">カスケード操作</div><div class="text-sm text-slate-600">親データ削除時に関連データも自動削除（オプション）</div></div></div><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-purple-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg></div><div><div class="font-medium text-slate-800">設計の明確化</div><div class="text-sm text-slate-600">テーブル間の関係が明示的になる</div></div></div></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">カスケード操作の設定例：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">FOREIGN KEY (instructor_id) REFERENCES instructors(id)
ON DELETE CASCADE    -- 講師削除時に関連コースも削除
ON UPDATE CASCADE    -- 講師ID変更時に関連コースも更新
</code></pre></div></div></div></details>
<h2 class="text-2xl font-semibold mb-3 mt-12 text-slate-800 dark:text-slate-200">JOIN（結合）の基本概念</h2>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">JOINとは何か？</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">JOIN</strong>とは、複数のテーブルを結合してデータを取得するSQL文です。正規化によって分割されたテーブルから、関連するデータを一緒に取得するために使用します。</p><div class="my-6 p-4 rounded-lg border bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-blue-800 dark:text-blue-200">重要なポイント</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">外部キー制約がなくてもJOINは実行できますが、制約があった方が安全で信頼できるデータベースになります。JOINは「接着剤」、外部キー制約は「品質管理」の役割です。</p></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">JOINと外部キー制約の関係：</strong></p><div class="overflow-x-auto my-4"><table class="w-full border-collapse border border-slate-200 dark:border-slate-700"><thead class="bg-slate-50 dark:bg-slate-800"><tr class="border-b border-slate-200 dark:border-slate-700"><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">項目</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">外部キー制約あり</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">外部キー制約なし</th></tr></thead><tbody class="text-slate-700 dark:text-slate-300"><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><strong class="font-semibold text-slate-900 dark:text-slate-100">JOINの実行</strong></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">✅ できる</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">✅ できる</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><strong class="font-semibold text-slate-900 dark:text-slate-100">データ整合性</strong></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">✅ 保証される</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">❌ 保証されない</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><strong class="font-semibold text-slate-900 dark:text-slate-100">不正データの挿入</strong></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">❌ 防げる</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">✅ 可能（危険）</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><strong class="font-semibold text-slate-900 dark:text-slate-100">参照先の削除</strong></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">❌ 防げる</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">✅ 可能（危険）</td></tr></tbody></table></div><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- 外部キー制約がなくても、この書き方でJOINできる
SELECT s.name, c.name
FROM enrollments e
INNER JOIN students s ON e.student_id = s.id  -- 制約なしでもOK
INNER JOIN courses c ON e.course_id = c.id;   -- 制約なしでもOK
</code></pre></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">JOINの種類と使い分け</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">主要なJOIN種類：</strong></p><div class="my-6 "><div class="infographic-content"><div class="space-y-4"><div class="p-4 bg-blue-50 rounded border border-blue-200"><div class="flex items-center mb-2"><div class="w-6 h-6 text-blue-600 mr-2"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg></div><div class="font-medium text-blue-800">INNER JOIN（内部結合）★★★★★</div></div><div class="text-sm text-blue-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>動作：</strong> 両方のテーブルに一致するデータがある場合のみ結果に表示<br/>
<strong>使用場面：</strong> 関連があるデータのみ取得したい場合（最も使用頻度が高い）</p></div></div><div class="p-4 bg-green-50 rounded border border-green-200"><div class="flex items-center mb-2"><div class="w-6 h-6 text-green-600 mr-2"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12"></path></svg></div><div class="font-medium text-green-800">LEFT JOIN（左外部結合）★★★☆☆</div></div><div class="text-sm text-green-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>動作：</strong> 左側（FROM句）のテーブルのデータを全て表示、右側に一致するデータがない場合はNULL<br/>
<strong>使用場面：</strong> 左側テーブルの全データ + 関連データを取得したい場合</p></div></div><div class="p-4 bg-orange-50 rounded border border-orange-200"><div class="flex items-center mb-2"><div class="w-6 h-6 text-orange-600 mr-2"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 13l-5 5m0 0l-5-5m5 5V6"></path></svg></div><div class="font-medium text-orange-800">RIGHT JOIN（右外部結合）★☆☆☆☆</div></div><div class="text-sm text-orange-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>動作：</strong> 右側（JOIN句）のテーブルのデータを全て表示<br/>
<strong>使用頻度：</strong> 実務ではあまり使われない（LEFT JOINで代用可能）</p></div></div></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">基本構文：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- INNER JOIN（内部結合）の基本構文
SELECT 列名
FROM テーブル1
INNER JOIN テーブル2 ON テーブル1.列 = テーブル2.列;

-- LEFT JOIN（左外部結合）の基本構文
SELECT 列名
FROM テーブル1
LEFT JOIN テーブル2 ON テーブル1.列 = テーブル2.列;
</code></pre></div></div></div></details>
<h2 class="text-2xl font-semibold mb-3 mt-12 text-slate-800 dark:text-slate-200">INNER JOINの実践演習</h2>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">演習準備：サンプルデータの投入</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">データベースとテーブルの作成：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- **************************************************
-- データベースの作成
-- **************************************************
CREATE DATABASE IF NOT EXISTS join_sample CHARACTER SET utf8 COLLATE utf8_unicode_ci;
USE join_sample;

-- **************************************************
-- テーブルの作成
-- **************************************************

-- 学生テーブル
CREATE TABLE IF NOT EXISTS students (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(64) NOT NULL,
    email VARCHAR(256) UNIQUE NOT NULL,
    phone VARCHAR(32)
);

-- 講師テーブル
CREATE TABLE IF NOT EXISTS instructors (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(64) NOT NULL,
    email VARCHAR(256) UNIQUE NOT NULL
);

-- コーステーブル
CREATE TABLE IF NOT EXISTS courses (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(64) NOT NULL,
    instructor_id INT NOT NULL,
    fee INT NOT NULL,
    FOREIGN KEY (instructor_id) REFERENCES instructors(id)
);

-- 受講テーブル（学生とコースの関連）
CREATE TABLE IF NOT EXISTS enrollments (
    id INT PRIMARY KEY AUTO_INCREMENT,
    student_id INT NOT NULL,
    course_id INT NOT NULL,
    enrollment_date DATE NOT NULL,
    FOREIGN KEY (student_id) REFERENCES students(id),
    FOREIGN KEY (course_id) REFERENCES courses(id)
);

-- **************************************************
-- ダミーデータの投入
-- **************************************************

-- 学生データ
INSERT INTO students (name, email, phone) VALUES 
(&#x27;田中太郎&#x27;, &#x27;tanaka@example.com&#x27;, &#x27;090-1234-5678&#x27;),
(&#x27;佐藤花子&#x27;, &#x27;sato@example.com&#x27;, &#x27;080-9876-5432&#x27;),
(&#x27;鈴木一郎&#x27;, &#x27;suzuki@example.com&#x27;, &#x27;070-1111-2222&#x27;);

-- 講師データ
INSERT INTO instructors (name, email) VALUES 
(&#x27;佐藤先生&#x27;, &#x27;sato@school.com&#x27;),
(&#x27;田中先生&#x27;, &#x27;tanaka@school.com&#x27;);

-- コースデータ
INSERT INTO courses (name, instructor_id, fee) VALUES 
(&#x27;PHP基礎&#x27;, 1, 50000),
(&#x27;JavaScript基礎&#x27;, 2, 45000),
(&#x27;React応用&#x27;, 1, 60000);

-- 受講データ
INSERT INTO enrollments (student_id, course_id, enrollment_date) VALUES 
(1, 1, &#x27;2024-01-15&#x27;),  -- 田中太郎がPHP基礎を受講
(2, 2, &#x27;2024-01-16&#x27;),  -- 佐藤花子がJavaScript基礎を受講
(1, 3, &#x27;2024-01-17&#x27;),  -- 田中太郎がReact応用を受講
(3, 1, &#x27;2024-01-18&#x27;),  -- 鈴木一郎がPHP基礎を受講
(1, 2, &#x27;2024-01-20&#x27;);  -- 田中太郎がJavaScript基礎を受講
</code></pre></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">演習1: コースと講師を結合して表示</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">段階的にJOINを理解しましょう：</strong></p><ol class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-decimal">
<li class="relative ml-2"><strong class="font-semibold text-slate-900 dark:text-slate-100">まずはcoursesテーブル単体から情報を取得</strong></li>
</ol><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- coursesテーブルの基本情報を確認
SELECT 
    name AS コース名,
    fee AS 受講料,
    instructor_id AS 担当講師ID
FROM courses;
</code></pre></div></div><ol class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-decimal" start="2">
<li class="relative ml-2"><strong class="font-semibold text-slate-900 dark:text-slate-100">INNER JOINでinstructorsと結合</strong></li>
</ol><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- コース名と担当講師名を一緒に表示
SELECT
    c.name AS コース名,
    c.fee AS 受講料,
    i.name AS 担当講師
FROM courses c
INNER JOIN instructors i ON c.instructor_id = i.id;
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">実行結果：</strong></p><div class="overflow-x-auto my-4"><table class="w-full border-collapse border border-slate-200 dark:border-slate-700"><thead class="bg-slate-50 dark:bg-slate-800"><tr class="border-b border-slate-200 dark:border-slate-700"><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">コース名</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">受講料</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">担当講師</th></tr></thead><tbody class="text-slate-700 dark:text-slate-300"><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">PHP基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">50000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤先生</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">JavaScript基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">45000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中先生</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">React応用</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">60000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤先生</td></tr></tbody></table></div><div class="my-6 p-4 rounded-lg border bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-green-800 dark:text-green-200">エイリアス（AS）の重要性</div><div class="text-slate-700 dark:text-slate-300"><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2"><code class="inline-block px-1.5 py-0.5 mx-0.5 text-sm font-mono bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded border border-slate-200 dark:border-slate-700">AS</code>を使って列名を分かりやすくする</li>
<li class="relative ml-2"><code class="inline-block px-1.5 py-0.5 mx-0.5 text-sm font-mono bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded border border-slate-200 dark:border-slate-700">courses c</code>のようにテーブル名も短縮できる</li>
<li class="relative ml-2">複数テーブルの同名列を区別するために必須</li>
</ul></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">演習2: 学生と受講コースを結合して表示</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">3つのテーブルをJOINする手順：</strong></p><ol class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-decimal">
<li class="relative ml-2"><strong class="font-semibold text-slate-900 dark:text-slate-100">enrollmentsテーブルから基本情報を確認</strong></li>
</ol><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- 受講テーブル単体の情報を確認
SELECT 
    id,
    student_id,
    course_id,
    enrollment_date
FROM enrollments
ORDER BY enrollment_date;
</code></pre></div></div><ol class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-decimal" start="2">
<li class="relative ml-2"><strong class="font-semibold text-slate-900 dark:text-slate-100">studentsテーブルと結合</strong></li>
</ol><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- 学生情報を結合
SELECT 
    e.id,
    s.name AS 学生名,
    e.course_id,
    e.enrollment_date
FROM enrollments e
INNER JOIN students s ON e.student_id = s.id
ORDER BY e.enrollment_date;
</code></pre></div></div><ol class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-decimal" start="3">
<li class="relative ml-2"><strong class="font-semibold text-slate-900 dark:text-slate-100">coursesテーブルも結合</strong></li>
</ol><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- 学生名と受講コース名を一緒に表示
SELECT
    s.name AS 学生名,
    s.email AS メールアドレス,
    c.name AS 受講コース,
    e.enrollment_date AS 受講開始日
FROM enrollments e
INNER JOIN students s ON e.student_id = s.id
INNER JOIN courses c ON e.course_id = c.id
ORDER BY e.enrollment_date;
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">実行結果：</strong></p><div class="overflow-x-auto my-4"><table class="w-full border-collapse border border-slate-200 dark:border-slate-700"><thead class="bg-slate-50 dark:bg-slate-800"><tr class="border-b border-slate-200 dark:border-slate-700"><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">学生名</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">メールアドレス</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">受講コース</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">受講開始日</th></tr></thead><tbody class="text-slate-700 dark:text-slate-300"><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:tanaka@example.com">tanaka@example.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">PHP基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-15</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤花子</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:sato@example.com">sato@example.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">JavaScript基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-16</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:tanaka@example.com">tanaka@example.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">React応用</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-17</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">鈴木一郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:suzuki@example.com">suzuki@example.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">PHP基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-18</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700"><a class="text-slate-600 dark:text-slate-400 underline underline-offset-2 hover:text-slate-800 dark:hover:text-slate-200 transition-colors" href="mailto:tanaka@example.com">tanaka@example.com</a></td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">JavaScript基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-20</td></tr></tbody></table></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">演習3: 4つのテーブルをすべてJOIN</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">すべての情報を統合して表示：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- 受講に関する全ての情報を表示
SELECT
    s.name AS 学生名,
    c.name AS コース名,
    i.name AS 担当講師,
    c.fee AS 受講料,
    e.enrollment_date AS 受講開始日
FROM enrollments e
INNER JOIN students s ON e.student_id = s.id
INNER JOIN courses c ON e.course_id = c.id
INNER JOIN instructors i ON c.instructor_id = i.id
ORDER BY e.enrollment_date;
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">実行結果：</strong></p><div class="overflow-x-auto my-4"><table class="w-full border-collapse border border-slate-200 dark:border-slate-700"><thead class="bg-slate-50 dark:bg-slate-800"><tr class="border-b border-slate-200 dark:border-slate-700"><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">学生名</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">コース名</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">担当講師</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">受講料</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">受講開始日</th></tr></thead><tbody class="text-slate-700 dark:text-slate-300"><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">PHP基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">50000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-15</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤花子</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">JavaScript基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">45000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-16</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">React応用</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">60000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-17</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">鈴木一郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">PHP基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">50000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-18</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">JavaScript基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">45000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-20</td></tr></tbody></table></div><div class="my-6 p-4 rounded-lg border bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-emerald-800 dark:text-emerald-200">複数テーブルJOINの成功</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">4つのテーブルから関連するすべての情報を1つのクエリで取得できました！これが正規化とJOINの力です。</p></div></div></div></div></details>
<h2 class="text-2xl font-semibold mb-3 mt-12 text-slate-800 dark:text-slate-200">LEFT JOINの実践演習</h2>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">LEFT JOIN用の追加データ準備</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">受講していない学生と受講者がいないコースを追加：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- 受講していない学生を追加
INSERT INTO students (name, email, phone) VALUES
(&#x27;山田花子&#x27;, &#x27;yamada@example.com&#x27;, &#x27;080-5555-6666&#x27;);

-- 受講者がいないコースを追加
INSERT INTO instructors (name, email) VALUES
(&#x27;山田先生&#x27;, &#x27;yamada@school.com&#x27;);

INSERT INTO courses (name, instructor_id, fee) VALUES
(&#x27;Python基礎&#x27;, 3, 55000);
</code></pre></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">演習4: 全学生の受講状況（受講していない学生も含む）</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">LEFT JOINを使って全学生を表示：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- 全学生を表示（受講していない学生も含む）
SELECT
    s.name AS 学生名,
    c.name AS 受講コース,
    e.enrollment_date AS 受講開始日
FROM students s
LEFT JOIN enrollments e ON s.id = e.student_id
LEFT JOIN courses c ON e.course_id = c.id
ORDER BY e.enrollment_date;
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">実行結果：</strong></p><div class="overflow-x-auto my-4"><table class="w-full border-collapse border border-slate-200 dark:border-slate-700"><thead class="bg-slate-50 dark:bg-slate-800"><tr class="border-b border-slate-200 dark:border-slate-700"><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">学生名</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">受講コース</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">受講開始日</th></tr></thead><tbody class="text-slate-700 dark:text-slate-300"><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">PHP基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-15</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤花子</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">JavaScript基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-16</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">React応用</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-17</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">鈴木一郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">PHP基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-18</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">JavaScript基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2024-01-20</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">山田花子</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">NULL</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">NULL</td></tr></tbody></table></div><div class="my-6 p-4 rounded-lg border bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-blue-800 dark:text-blue-200">LEFT JOINの特徴</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">左側（FROM句）のテーブル（students）の全データを表示し、右側に関連データがない場合はNULLで表示されます。山田花子さんは受講していないため、NULLが表示されています。</p></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">INNER JOINとの比較：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- INNER JOINの場合（受講している学生のみ表示）
SELECT 
    s.name AS 学生名,
    c.name AS 受講コース,
    e.enrollment_date AS 受講開始日
FROM students s
INNER JOIN enrollments e ON s.id = e.student_id
INNER JOIN courses c ON e.course_id = c.id
ORDER BY e.enrollment_date;
-- 山田花子は表示されない
</code></pre></div></div></div></details>
<h2 class="text-2xl font-semibold mb-3 mt-12 text-slate-800 dark:text-slate-200">GROUP BYによる集計分析</h2>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">GROUP BYとは何か？</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">GROUP BY</strong>は、同じ値を持つ行をグループ化してまとめる機能です。集計関数（COUNT、SUM、AVG、MAX、MIN）と組み合わせて使用し、「〜別に集計したい」という場面で活用します。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">基本構文：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">SELECT
    グループ化したい列,
    集計関数(集計したい列)
FROM テーブル名
GROUP BY グループ化したい列;
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">主な集計関数：</strong></p><div class="my-6 "><div class="infographic-content"><div class="grid grid-cols-2 md:grid-cols-5 gap-3"><div class="p-3 bg-blue-50 rounded border border-blue-200 text-center"><div class="font-medium text-blue-800">COUNT()</div><div class="text-xs text-blue-600">行数をカウント</div></div><div class="p-3 bg-green-50 rounded border border-green-200 text-center"><div class="font-medium text-green-800">SUM()</div><div class="text-xs text-green-600">合計値を計算</div></div><div class="p-3 bg-orange-50 rounded border border-orange-200 text-center"><div class="font-medium text-orange-800">AVG()</div><div class="text-xs text-orange-600">平均値を計算</div></div><div class="p-3 bg-purple-50 rounded border border-purple-200 text-center"><div class="font-medium text-purple-800">MAX()</div><div class="text-xs text-purple-600">最大値を取得</div></div><div class="p-3 bg-red-50 rounded border border-red-200 text-center"><div class="font-medium text-red-800">MIN()</div><div class="text-xs text-red-600">最小値を取得</div></div></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">演習5: 学生別の受講状況集計</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">学生別に受講コース数と支払い総額を集計：</strong></p><ol class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-decimal">
<li class="relative ml-2"><strong class="font-semibold text-slate-900 dark:text-slate-100">GROUP BYなしで集計関数を使ってみる（エラー例）</strong></li>
</ol><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- ❌ これはエラーになる！
SELECT 
    s.name AS 学生名,
    COUNT(e.id) AS 受講コース数,
    SUM(c.fee) AS 支払い総額
FROM students s
INNER JOIN enrollments e ON s.id = e.student_id
INNER JOIN courses c ON e.course_id = c.id;
-- GROUP BY がないとエラー！
</code></pre></div></div><ol class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-decimal" start="2">
<li class="relative ml-2"><strong class="font-semibold text-slate-900 dark:text-slate-100">GROUP BYを追加（学生別に集計）</strong></li>
</ol><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- 学生別の受講コース数と支払い総額
SELECT
    s.name AS 学生名,
    COUNT(e.id) AS 受講コース数,
    SUM(c.fee) AS 支払い総額,
    AVG(c.fee) AS 平均受講料
FROM students s
INNER JOIN enrollments e ON s.id = e.student_id
INNER JOIN courses c ON e.course_id = c.id
GROUP BY s.id, s.name
ORDER BY 支払い総額 DESC;
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">実行結果：</strong></p><div class="overflow-x-auto my-4"><table class="w-full border-collapse border border-slate-200 dark:border-slate-700"><thead class="bg-slate-50 dark:bg-slate-800"><tr class="border-b border-slate-200 dark:border-slate-700"><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">学生名</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">受講コース数</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">支払い総額</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">平均受講料</th></tr></thead><tbody class="text-slate-700 dark:text-slate-300"><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">3</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">155000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">51666.67</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">鈴木一郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">1</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">50000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">50000.00</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤花子</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">1</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">45000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">45000.00</td></tr></tbody></table></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">概念の理解：</strong></p><div class="my-6 p-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/30 dark:bg-slate-800/30"><div class="text-center text-slate-500 dark:text-slate-400 text-sm py-4">図表を読み込み中...</div><div class="text-center w-full flex justify-center hidden"></div></div><div class="my-6 p-4 rounded-lg border bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-green-800 dark:text-green-200">GROUP BYで複数列を指定する理由</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><code class="inline-block px-1.5 py-0.5 mx-0.5 text-sm font-mono bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded border border-slate-200 dark:border-slate-700">s.id, s.name</code>のように複数列を指定するのは：</p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2"><code class="inline-block px-1.5 py-0.5 mx-0.5 text-sm font-mono bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded border border-slate-200 dark:border-slate-700">s.id</code>だけでもグループ化は可能（学生IDは重複しないため）</li>
<li class="relative ml-2"><code class="inline-block px-1.5 py-0.5 mx-0.5 text-sm font-mono bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded border border-slate-200 dark:border-slate-700">s.name</code>も追加することで、SELECT句で学生名を表示可能</li>
<li class="relative ml-2">一般的には主キー + 表示したい列をGROUP BYに含める</li>
</ul></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">演習6: 講師別・コース別の分析</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">講師別の担当状況：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- 講師別の担当コース数と受講生数
SELECT
    i.name AS 講師名,
    COUNT(DISTINCT c.id) AS 担当コース数,
    COUNT(e.id) AS 受講生数,
    SUM(c.fee) AS 総売上
FROM instructors i
INNER JOIN courses c ON i.id = c.instructor_id
LEFT JOIN enrollments e ON c.id = e.course_id
GROUP BY i.id, i.name
ORDER BY 総売上 DESC;
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">実行結果：</strong></p><div class="overflow-x-auto my-4"><table class="w-full border-collapse border border-slate-200 dark:border-slate-700"><thead class="bg-slate-50 dark:bg-slate-800"><tr class="border-b border-slate-200 dark:border-slate-700"><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">講師名</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">担当コース数</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">受講生数</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">総売上</th></tr></thead><tbody class="text-slate-700 dark:text-slate-300"><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">3</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">160000</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">1</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">90000</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">山田先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">1</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">0</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">0</td></tr></tbody></table></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">コース別の人気ランキング：</strong></p><div><div class="group relative my-4 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700"><button class="absolute right-2 top-2 rounded bg-slate-800/70 px-2 py-1 text-xs text-white opacity-0 transition-opacity group-hover:opacity-100 z-10">コピー</button><pre class="language-sql !m-0 !p-4 !bg-slate-900 dark:!bg-slate-950 !text-slate-100 overflow-x-auto"><code class="language-sql">-- コース別の受講生数ランキング
SELECT
    c.name AS コース名,
    i.name AS 担当講師,
    COUNT(e.id) AS 受講生数,
    c.fee AS 受講料,
    (COUNT(e.id) * c.fee) AS コース総売上
FROM courses c
INNER JOIN instructors i ON c.instructor_id = i.id
LEFT JOIN enrollments e ON c.id = e.course_id
GROUP BY c.id, c.name, i.name, c.fee
ORDER BY 受講生数 DESC;
</code></pre></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">実行結果：</strong></p><div class="overflow-x-auto my-4"><table class="w-full border-collapse border border-slate-200 dark:border-slate-700"><thead class="bg-slate-50 dark:bg-slate-800"><tr class="border-b border-slate-200 dark:border-slate-700"><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">コース名</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">担当講師</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">受講生数</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">受講料</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">コース総売上</th></tr></thead><tbody class="text-slate-700 dark:text-slate-300"><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">PHP基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">50000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">100000</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">JavaScript基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">田中先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">45000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">90000</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">React応用</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">1</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">60000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">60000</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">Python基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">山田先生</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">0</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">55000</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">0</td></tr></tbody></table></div></div></details>
<h2 class="text-2xl font-semibold mb-3 mt-12 text-slate-800 dark:text-slate-200">データモデリングの基礎</h2>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">データモデリングの必要性</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">データモデリングを行う理由は以下の通りです：</p><div class="my-6 "><div class="infographic-content"><div class="space-y-3"><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-blue-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><div class="font-medium text-slate-800">データ整合性の確保</div><div class="text-sm text-slate-600">データ間の正確な関係を定義し、データの一貫性と正確性を保証する</div></div></div><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-green-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><div><div class="font-medium text-slate-800">効率的なデータアクセス</div><div class="text-sm text-slate-600">適切に構造化されたデータモデルを通じて、データの検索、更新、削除が効率的に実施</div></div></div><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-purple-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></div><div><div class="font-medium text-slate-800">複雑なデータ関係の可視化</div><div class="text-sm text-slate-600">ER図などのデータモデリングツールを使用して、複雑なデータの関係性を明確に理解し、可視化</div></div></div></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">エンティティとは</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">エンティティ</strong>はデータベースで管理される情報の単位です。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">例：学校のデータベースの場合のエンティティ</strong></p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">「生徒」「先生」「授業」...など</li>
</ul><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">各エンティティは属性を持つ：</strong></p><div class="my-6 "><div class="infographic-content"><div class="p-4 bg-blue-50 rounded border border-blue-200"><div class="font-medium text-blue-800 mb-3">「生徒」エンティティの属性例</div><div class="grid grid-cols-3 gap-2"><div class="p-2 bg-white rounded border border-blue-100 text-center text-sm">名前</div><div class="p-2 bg-white rounded border border-blue-100 text-center text-sm">学年</div><div class="p-2 bg-white rounded border border-blue-100 text-center text-sm">クラス</div><div class="p-2 bg-white rounded border border-blue-100 text-center text-sm">学籍番号</div><div class="p-2 bg-white rounded border border-blue-100 text-center text-sm">生年月日</div><div class="p-2 bg-white rounded border border-blue-100 text-center text-sm">...</div></div></div></div></div><div class="my-6 p-4 rounded-lg border bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-green-800 dark:text-green-200">ポイント</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">エンティティは「テーブル」として実装され、属性は「カラム（列）」として実装されます。</p></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">リレーションシップとは</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">リレーションシップ</strong>はエンティティ間の関連性を示します。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">例：</strong> 「生徒」は「授業」に「参加する」というリレーションシップがある</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">リレーションシップの種類：</strong></p><div class="my-6 "><div class="infographic-content"><div class="space-y-3"><div class="flex items-start p-3 bg-blue-50 rounded border border-blue-200"><div class="w-6 h-6 text-blue-600 mr-3 mt-0.5"><div class="text-lg font-bold">1:1</div></div><div><div class="font-medium text-slate-800">一対一（One-to-One）</div><div class="text-sm text-slate-600">1つのレコードが別のテーブルの1つのレコードとだけ関連</div></div></div><div class="flex items-start p-3 bg-green-50 rounded border border-green-200"><div class="w-6 h-6 text-green-600 mr-3 mt-0.5"><div class="text-lg font-bold">1:N</div></div><div><div class="font-medium text-slate-800">一対多（One-to-Many）</div><div class="text-sm text-slate-600">1つのレコードが別のテーブルの複数レコードと関連</div></div></div><div class="flex items-start p-3 bg-orange-50 rounded border border-orange-200"><div class="w-6 h-6 text-orange-600 mr-3 mt-0.5"><div class="text-lg font-bold">N:M</div></div><div><div class="font-medium text-slate-800">多対多（Many-to-Many）</div><div class="text-sm text-slate-600">複数のレコードが別のテーブルの複数レコードと関連</div></div></div></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">キーの概念（プライマリキー・外部キー）</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">プライマリキー（主キー）</strong></p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">各エンティティ内のレコードを一意に識別するためのキーです。</p><div class="my-6 "><div class="infographic-content"><div class="p-4 bg-blue-50 rounded border border-blue-200"><div class="font-medium text-blue-800 mb-2">プライマリキーの特徴</div><div class="text-sm text-blue-700 space-y-1"><div>例: 「生徒ID」は生徒エンティティのプライマリキー</div><div>プライマリキーの値は<strong>重複や変更が許容されない</strong></div></div></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">外部キー（Foreign Key）</strong></p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">異なるエンティティ間のリレーションシップを表現するためのキーです。</p><div class="my-6 "><div class="infographic-content"><div class="p-4 bg-green-50 rounded border border-green-200"><div class="font-medium text-green-800 mb-2">外部キーの特徴</div><div class="text-sm text-green-700 space-y-1"><div>あるエンティティのプライマリキーを別のエンティティの属性として含む</div><div>例: 「授業」エンティティに「生徒ID」を外部キーとして持たせる</div><div>→「どの生徒がどの授業に参加しているか」を表現</div></div></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">ER図とは</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">ER図</strong>（Entity Relationship Diagram）は、エンティティ・リレーションシップ図のことです。エンティティ間の関連性やキーの概念を視覚的に表現した図です。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">ER図の構成要素：</strong></p><div class="my-6 "><div class="infographic-content"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-3 bg-slate-50 rounded border border-slate-200"><div class="font-medium text-slate-800 mb-2">エンティティ</div><div class="text-sm text-slate-600">四角形で表され、エンティティ名が記載される</div></div><div class="p-3 bg-slate-50 rounded border border-slate-200"><div class="font-medium text-slate-800 mb-2">リレーションシップ</div><div class="text-sm text-slate-600">線でエンティティ間を結び、関連性の種類を示す</div></div><div class="p-3 bg-slate-50 rounded border border-slate-200"><div class="font-medium text-slate-800 mb-2">属性</div><div class="text-sm text-slate-600">エンティティに紐づく情報（カラム）</div></div><div class="p-3 bg-slate-50 rounded border border-slate-200"><div class="font-medium text-slate-800 mb-2">キー</div><div class="text-sm text-slate-600">PK（主キー）、FK（外部キー）を明示する</div></div></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">ER図の例：授業と生徒の管理システム</strong></p><div class="my-6 p-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/30 dark:bg-slate-800/30"><div class="text-center text-slate-500 dark:text-slate-400 text-sm py-4">図表を読み込み中...</div><div class="text-center w-full flex justify-center hidden"></div></div></div></details>
<h2 class="text-2xl font-semibold mb-3 mt-12 text-slate-800 dark:text-slate-200">ER図作成演習 - draw.io（diagrams.net）</h2>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">draw.ioとは</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">draw.io</strong>（現在は diagrams.net としても知られる）は、無料で使える多機能なダイアグラム作成ツールです。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">作成できる図の種類：</strong></p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">フローチャート</li>
<li class="relative ml-2">プロセス図</li>
<li class="relative ml-2">組織図</li>
<li class="relative ml-2">UML図</li>
<li class="relative ml-2"><strong class="font-semibold text-slate-900 dark:text-slate-100">ER図（エンティティ・リレーションシップ図）</strong></li>
</ul><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">利用方法：</strong></p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">Webベースで利用可能</li>
<li class="relative ml-2">デスクトップアプリケーション</li>
<li class="relative ml-2"><strong class="font-semibold text-slate-900 dark:text-slate-100">Visual Studio Code の拡張機能</strong>（今回はこれを使用）</li>
</ul></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">主なER図作成サービスとその比較</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><div class="my-6 "><div class="infographic-content"><div class="space-y-4"><div class="p-4 bg-blue-50 rounded border border-blue-200"><div class="font-medium text-blue-800 mb-2">draw.io / diagrams.net</div><div class="text-sm text-blue-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>利点:</strong> 無料でアクセスしやすく、直感的な操作が可能。豊富なテンプレートとクラウド統合機能<br/>
<strong>欠点:</strong> 専門的なデータモデリング機能には限りがある</p></div></div><div class="p-4 bg-green-50 rounded border border-green-200"><div class="font-medium text-green-800 mb-2">Lucidchart</div><div class="text-sm text-green-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>利点:</strong> 直感的なインターフェースと豊富な機能。リアルタイムでの共同編集<br/>
<strong>欠点:</strong> 無料版には機能制限があり、フル機能には有料プランが必要</p></div></div><div class="p-4 bg-orange-50 rounded border border-orange-200"><div class="font-medium text-orange-800 mb-2">Microsoft Visio</div><div class="text-sm text-orange-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>利点:</strong> 複雑な図の作成に対応し、業界標準のツールとしての信頼性が高い<br/>
<strong>欠点:</strong> 高価で、Microsoft製品との統合に重点</p></div></div></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">VSCodeへの拡張機能のインストール</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">1. VSCode拡張機能マーケットプレイスにアクセス</strong></p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">VSCodeの拡張機能タブから「Draw.io Integration」を検索してインストールします。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">2. 新しいER図の作成</strong></p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">VSCodeで新しいファイルを作成し、ファイルの拡張子を <code class="inline-block px-1.5 py-0.5 mx-0.5 text-sm font-mono bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded border border-slate-200 dark:border-slate-700">.drawio</code> または <code class="inline-block px-1.5 py-0.5 mx-0.5 text-sm font-mono bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded border border-slate-200 dark:border-slate-700">.dio</code> に設定します。</p><div><code class="inline-block px-1.5 py-0.5 mx-0.5 text-sm font-mono bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded border border-slate-200 dark:border-slate-700">例: database-design.drawio
</code></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">ファイルを保存すると、draw.ioのエディタが自動的に開きます。</p><div class="my-6 p-4 rounded-lg border bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-green-800 dark:text-green-200">テーマカラーの変更</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">画面右下の「Theme: XXX」を押下することで色を変更することができます。お好みのテーマを選択してください。</p></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">ER図の要素追加と作図手順</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">1. ER図の要素追加</strong></p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">左側メニューの「その他の要素」を押下し、「ソフトウェア &gt; ER」にチェックを入れて「適用」を押下します。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">2. エンティティの作図</strong></p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">必要な形状をクリックし、ドラッグ&amp;ドロップでキャンバスに配置します。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">3. エンティティの編集</strong></p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">形状をダブルクリックしてテキストを編集</li>
<li class="relative ml-2">フィールドを追加したい場合は、挿入したいフィールドを選択後、「フォーマット &gt; 配置 &gt; テーブル」内にあるアイコンを押下</li>
</ul><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">4. リレーションの作図</strong></p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">エンティティを未選択状態でカーソルを乗せると青い矢印が表示される</li>
<li class="relative ml-2">エンティティ間をドラッグして線を引く</li>
</ul><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">5. リレーションの編集</strong></p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">リレーションを選択状態にすると「フォーマット &gt; スタイル」より編集が可能になります。</p><div class="my-6 p-4 rounded-lg border bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-green-800 dark:text-green-200">よく使うアイコン</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">下段アイコンの「線の形状」「始点の形状」「終点の形状」をよく使います。リレーションの種類（1:1、1:N、N:M）に応じて適切な形状を選択しましょう。</p></div></div></div></div></details>
<h2 class="text-2xl font-semibold mb-3 mt-12 text-slate-800 dark:text-slate-200">正規化の詳細演習</h2>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">正規化のプロセス</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">正規化は段階的に行われ、各段階でより適切なデータ設計となります。</p><div class="my-6 p-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/30 dark:bg-slate-800/30"><div class="text-center text-slate-500 dark:text-slate-400 text-sm py-4">図表を読み込み中...</div><div class="text-center w-full flex justify-center hidden"></div></div><div class="my-6 p-4 rounded-lg border bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-green-800 dark:text-green-200">実務での正規化</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">一般的なWebアプリケーション開発では、第3正規形（3NF）まで正規化すれば十分です。それ以上の正規化（BCNF、4NF、5NF）は特殊なケースでのみ必要になります。</p></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">第1正規化（1NF）の詳細</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">説明：</strong>
テーブル内の各カラムに原子値（これ以上分割できない値）のみが含まれ、各カラムの値が一意のデータ型を持つこと。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">噛み砕いた説明：</strong>
各マス（セル）には <strong class="font-semibold text-slate-900 dark:text-slate-100">1つの情報だけ</strong> を入れる。リストや複数の値を1つのマスに入れない。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">例：</strong></p><div class="my-6 "><div class="infographic-content"><div class="space-y-4"><div class="p-4 bg-red-50 rounded border border-red-200"><div class="font-medium text-red-800 mb-2">非正規化（NG）</div><div class="overflow-x-auto"><table class="text-sm w-full"><thead><tr class="bg-red-100"><th class="p-2 border">生徒名</th><th class="p-2 border">クラブ活動</th></tr></thead><tbody><tr><td class="p-2 border">田中太郎</td><td class="p-2 border text-red-600">サッカー部, テニス部</td></tr><tr><td class="p-2 border">佐藤花子</td><td class="p-2 border text-red-600">吹奏楽部, 美術部, 文芸部</td></tr></tbody></table></div><div class="text-xs text-red-600 mt-2">問題: 1つのセルに複数の値が入っている</div></div><div class="p-4 bg-green-50 rounded border border-green-200"><div class="font-medium text-green-800 mb-2">第1正規形（OK）</div><div class="overflow-x-auto"><table class="text-sm w-full"><thead><tr class="bg-green-100"><th class="p-2 border">生徒名</th><th class="p-2 border">クラブ活動</th></tr></thead><tbody><tr><td class="p-2 border">田中太郎</td><td class="p-2 border">サッカー部</td></tr><tr><td class="p-2 border">田中太郎</td><td class="p-2 border">テニス部</td></tr><tr><td class="p-2 border">佐藤花子</td><td class="p-2 border">吹奏楽部</td></tr><tr><td class="p-2 border">佐藤花子</td><td class="p-2 border">美術部</td></tr><tr><td class="p-2 border">佐藤花子</td><td class="p-2 border">文芸部</td></tr></tbody></table></div><div class="text-xs text-green-600 mt-2">改善: 各セルに1つの値のみ</div></div></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">第2正規化（2NF）の詳細</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">説明：</strong>
1NFを満たし、全ての非キーカラムがプライマリキー全体に完全に依存している（部分的依存がない）こと。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">噛み砕いた説明：</strong>
テーブルが複数の情報を混在させず、<strong class="font-semibold text-slate-900 dark:text-slate-100">情報ごとにテーブルを分ける</strong>。プライマリキーの一部だけに依存する情報がないようにする。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">例：</strong></p><div class="my-6 "><div class="infographic-content"><div class="space-y-4"><div class="p-4 bg-red-50 rounded border border-red-200"><div class="font-medium text-red-800 mb-2">非2NF（NG）</div><div class="overflow-x-auto"><table class="text-sm w-full"><thead><tr class="bg-red-100"><th class="p-2 border">学生ID</th><th class="p-2 border">科目ID</th><th class="p-2 border">科目名</th><th class="p-2 border">成績</th></tr></thead><tbody><tr><td class="p-2 border">S001</td><td class="p-2 border">C001</td><td class="p-2 border text-red-600">数学</td><td class="p-2 border">85</td></tr><tr><td class="p-2 border">S001</td><td class="p-2 border">C002</td><td class="p-2 border text-red-600">英語</td><td class="p-2 border">90</td></tr></tbody></table></div><div class="text-xs text-red-600 mt-2">問題: 科目名は科目IDにのみ依存（部分依存）</div></div><div class="p-4 bg-green-50 rounded border border-green-200"><div class="font-medium text-green-800 mb-2">第2正規形（OK）- テーブルを分割</div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><div class="text-xs font-medium mb-1">成績テーブル</div><table class="text-sm w-full"><thead><tr class="bg-green-100"><th class="p-1 border text-xs">学生ID</th><th class="p-1 border text-xs">科目ID</th><th class="p-1 border text-xs">成績</th></tr></thead><tbody><tr><td class="p-1 border text-xs">S001</td><td class="p-1 border text-xs">C001</td><td class="p-1 border text-xs">85</td></tr><tr><td class="p-1 border text-xs">S001</td><td class="p-1 border text-xs">C002</td><td class="p-1 border text-xs">90</td></tr></tbody></table></div><div><div class="text-xs font-medium mb-1">科目テーブル</div><table class="text-sm w-full"><thead><tr class="bg-green-100"><th class="p-1 border text-xs">科目ID</th><th class="p-1 border text-xs">科目名</th></tr></thead><tbody><tr><td class="p-1 border text-xs">C001</td><td class="p-1 border text-xs">数学</td></tr><tr><td class="p-1 border text-xs">C002</td><td class="p-1 border text-xs">英語</td></tr></tbody></table></div></div></div></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">第3正規化（3NF）の詳細</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">説明：</strong>
2NFを満たし、全ての非キーカラムが他の非キーカラムに依存していない（推移的関数従属がない）こと。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">噛み砕いた説明：</strong>
情報が他の情報に <strong class="font-semibold text-slate-900 dark:text-slate-100">間接的に依存しないようにする</strong>。ある情報が他の情報を経由してキーに関連している場合、その間接的な関係を取り除く。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">例：</strong></p><div class="my-6 "><div class="infographic-content"><div class="space-y-4"><div class="p-4 bg-red-50 rounded border border-red-200"><div class="font-medium text-red-800 mb-2">非3NF（NG）</div><div class="overflow-x-auto"><table class="text-sm w-full"><thead><tr class="bg-red-100"><th class="p-2 border">教師ID</th><th class="p-2 border">教師名</th><th class="p-2 border">学部ID</th><th class="p-2 border">学部名</th></tr></thead><tbody><tr><td class="p-2 border">T001</td><td class="p-2 border">山田先生</td><td class="p-2 border">D01</td><td class="p-2 border text-red-600">理学部</td></tr><tr><td class="p-2 border">T002</td><td class="p-2 border">佐藤先生</td><td class="p-2 border">D01</td><td class="p-2 border text-red-600">理学部</td></tr></tbody></table></div><div class="text-xs text-red-600 mt-2">問題: 学部名は学部IDに依存（推移的依存: 教師ID → 学部ID → 学部名）</div></div><div class="p-4 bg-green-50 rounded border border-green-200"><div class="font-medium text-green-800 mb-2">第3正規形（OK）- テーブルを分割</div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><div class="text-xs font-medium mb-1">教師テーブル</div><table class="text-sm w-full"><thead><tr class="bg-green-100"><th class="p-1 border text-xs">教師ID</th><th class="p-1 border text-xs">教師名</th><th class="p-1 border text-xs">学部ID</th></tr></thead><tbody><tr><td class="p-1 border text-xs">T001</td><td class="p-1 border text-xs">山田先生</td><td class="p-1 border text-xs">D01</td></tr><tr><td class="p-1 border text-xs">T002</td><td class="p-1 border text-xs">佐藤先生</td><td class="p-1 border text-xs">D01</td></tr></tbody></table></div><div><div class="text-xs font-medium mb-1">学部テーブル</div><table class="text-sm w-full"><thead><tr class="bg-green-100"><th class="p-1 border text-xs">学部ID</th><th class="p-1 border text-xs">学部名</th></tr></thead><tbody><tr><td class="p-1 border text-xs">D01</td><td class="p-1 border text-xs">理学部</td></tr></tbody></table></div></div></div></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold"><span class="inline-flex items-center px-2 mr-1 text-sm font-medium bg-slate-800 dark:bg-slate-100/30 text-slate-100 dark:text-slate-900 rounded-full h-full">演習</span> 非正規系データの正規化</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><div class="my-6 p-4 rounded-lg border bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-yellow-800 dark:text-yellow-200">課題</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">書籍とその販売店・販売地を管理しているシートがあります。サンプルデータを参考に、draw.io で正規化されたER図を作成してください。</p></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">サンプルデータ：</strong></p><div class="overflow-x-auto my-4"><table class="w-full border-collapse border border-slate-200 dark:border-slate-700"><thead class="bg-slate-50 dark:bg-slate-800"><tr class="border-b border-slate-200 dark:border-slate-700"><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">書籍ID</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">書籍名</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">著者</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">出版年</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">販売店</th><th class="px-4 py-2 text-left font-semibold text-slate-900 dark:text-slate-100 border-r border-slate-200 dark:border-slate-700">販売店所在地</th></tr></thead><tbody class="text-slate-700 dark:text-slate-300"><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">1</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">データベース入門</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">山田太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2020</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">書店A</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">東京</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">1</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">データベース入門</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">山田太郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2020</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">書店B</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">大阪</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">プログラミングの基礎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">佐藤花子</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2021</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">書店A</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">東京</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">3</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">統計学入門</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">伊藤一郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2019</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">書店C</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">福岡</td></tr><tr class="border-b border-slate-200 dark:border-slate-700"><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">3</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">統計学入門</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">伊藤一郎</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">2019</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">書店D</td><td class="px-4 py-2 border-r border-slate-200 dark:border-slate-700">札幌</td></tr></tbody></table></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">条件：</strong></p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">リレーション / キー の記載はなくて良い</li>
<li class="relative ml-2">日本語での記載で良い</li>
</ul><div class="my-6 p-4 rounded-lg border bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-green-800 dark:text-green-200">追加チャレンジ</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">課題が終わったら以下にもチャレンジしてみよう！</p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">テーブル名 / カラム名 を英単語にしてみよう</li>
<li class="relative ml-2">キー（PK / FK）を割り振ってみよう</li>
<li class="relative ml-2">リレーションを定義してみよう</li>
</ul></div></div></div><details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold"><span class="inline-flex items-center px-2 mr-1 text-sm font-medium bg-slate-400 dark:bg-slate-400/30 text-slate-100 dark:text-slate-900 rounded-full h-full">補足</span> 回答例（演習が完了してから見てください）</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">正規化後のテーブル構成：</strong></p><div class="my-6 p-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/30 dark:bg-slate-800/30"><div class="text-center text-slate-500 dark:text-slate-400 text-sm py-4">図表を読み込み中...</div><div class="text-center w-full flex justify-center hidden"></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">ポイント：</strong></p><ol class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-decimal">
<li class="relative ml-2">書籍情報（books）と販売店情報（stores）を分離</li>
<li class="relative ml-2">多対多の関係を中間テーブル（book_stores）で表現</li>
<li class="relative ml-2">重複データが排除され、データ整合性が保たれる</li>
</ol></div></details></div></details>
<h2 class="text-2xl font-semibold mb-3 mt-12 text-slate-800 dark:text-slate-200">リレーションの詳細</h2>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">1対1（One-to-One）リレーション</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">解説：</strong>
一つのレコードが別のテーブルのただ一つのレコードとだけ関連づけられる関係。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">定義方法：</strong>
主キーを外部キーとして別のテーブルに設定する。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">実例：</strong></p><div class="my-6 p-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/30 dark:bg-slate-800/30"><div class="text-center text-slate-500 dark:text-slate-400 text-sm py-4">図表を読み込み中...</div><div class="text-center w-full flex justify-center hidden"></div></div><div class="my-6 "><div class="infographic-content"><div class="p-4 bg-blue-50 rounded border border-blue-200"><div class="font-medium text-blue-800 mb-2">1対1リレーションの使用例</div><div class="text-sm text-blue-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>ユーザー</strong> と <strong>ユーザープロフィール</strong><br/>
1人のユーザーには1つのプロフィールが対応し、1つのプロフィールは1人のユーザーにのみ属する</p></div></div></div></div><div class="my-6 p-4 rounded-lg border bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-green-800 dark:text-green-200">1対1リレーションを使う場面</div><div class="text-slate-700 dark:text-slate-300"><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">テーブルを機能的に分割したい場合</li>
<li class="relative ml-2">アクセス頻度の異なるデータを分離したい場合</li>
<li class="relative ml-2">セキュリティ上の理由でデータを分離したい場合</li>
</ul></div></div></div></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">1対多（One-to-Many）リレーション</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">解説：</strong>
一つのレコードが別のテーブルの複数のレコードと関連づけられる関係。最も一般的なリレーションタイプです。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">定義方法：</strong>
&quot;多&quot; 側のテーブルに &quot;一&quot; 側のテーブルの主キーを外部キーとして設定する。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">実例：</strong></p><div class="my-6 p-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/30 dark:bg-slate-800/30"><div class="text-center text-slate-500 dark:text-slate-400 text-sm py-4">図表を読み込み中...</div><div class="text-center w-full flex justify-center hidden"></div></div><div class="my-6 "><div class="infographic-content"><div class="p-4 bg-green-50 rounded border border-green-200"><div class="font-medium text-green-800 mb-2">1対多リレーションの使用例</div><div class="text-sm text-green-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>部署</strong> と <strong>社員</strong><br/>
1つの部署には複数の社員が所属できるが、1人の社員は1つの部署にのみ所属する</p></div></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">その他の例：</strong></p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">顧客 と 注文（1人の顧客は複数の注文を行える）</li>
<li class="relative ml-2">カテゴリ と 商品（1つのカテゴリには複数の商品が属する）</li>
<li class="relative ml-2">著者 と 記事（1人の著者は複数の記事を執筆できる）</li>
</ul></div></details>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">多対多（Many-to-Many）リレーション</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">解説：</strong>
複数のレコードが別のテーブルの複数のレコードと関連づけられる関係。この関係を直接的に表現することはできないため、<strong class="font-semibold text-slate-900 dark:text-slate-100">中間テーブル</strong>を用いて関連づけます。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">中間テーブルとは：</strong>
二つのテーブル間の多対多の関係を管理するために使用されるテーブル。各レコードは、関連する二つのテーブルのレコード間のリンクを表します。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">定義方法：</strong>
中間テーブルには、関連する二つのテーブルの主キーを外部キーとして含める。これらの外部キーの組み合わせが中間テーブルのユニークキーまたはプライマリキーになります。</p><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">実例：</strong></p><div class="my-6 p-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50/30 dark:bg-slate-800/30"><div class="text-center text-slate-500 dark:text-slate-400 text-sm py-4">図表を読み込み中...</div><div class="text-center w-full flex justify-center hidden"></div></div><div class="my-6 "><div class="infographic-content"><div class="p-4 bg-orange-50 rounded border border-orange-200"><div class="font-medium text-orange-800 mb-2">多対多リレーションの使用例</div><div class="text-sm text-orange-700"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong>生徒</strong> と <strong>授業</strong><br/>
1人の生徒は複数の授業を受講でき、1つの授業には複数の生徒が参加できる<br/>
→ <strong>中間テーブル（enrollments）</strong> で関係を管理</p></div></div></div></div><div class="my-6 p-4 rounded-lg border bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 flex gap-3"><div class="flex-shrink-0"><svg class="w-5 h-5 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div><div class="flex-1 min-w-0"><div class="font-semibold mb-1 text-yellow-800 dark:text-yellow-200">中間テーブルの重要性</div><div class="text-slate-700 dark:text-slate-300"><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed">多対多リレーションは必ず中間テーブルを使って実装します。中間テーブルには追加情報（例：登録日、ステータスなど）を持たせることもできます。</p></div></div></div><p class="my-2 text-slate-700 dark:text-slate-300 leading-relaxed"><strong class="font-semibold text-slate-900 dark:text-slate-100">その他の例：</strong></p><ul class="mb-4 space-y-1 text-slate-700 dark:text-slate-300 pl-6 list-disc">
<li class="relative ml-2">商品 と タグ（1つの商品に複数のタグ、1つのタグは複数の商品に付与）</li>
<li class="relative ml-2">ユーザー と ロール（1人のユーザーに複数のロール、1つのロールは複数のユーザーに割当）</li>
</ul></div></details>
<h2 class="text-2xl font-semibold mb-3 mt-12 text-slate-800 dark:text-slate-200">まとめ</h2>
<details class="rounded-lg border border-slate-200 dark:border-slate-700 px-4 py-4 my-4 hover:shadow transition outline-none focus:ring-0 focus:outline-none"><summary class="cursor-pointer select-none text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-slate-100 font-bold">今回学んだ重要なポイント</summary><div class="mt-6 text-slate-600 dark:text-slate-400"><div class="my-6 "><div class="infographic-content"><div class="space-y-3"><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-blue-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div><div><div class="font-medium text-slate-800">データモデリング</div><div class="text-sm text-slate-600">エンティティとリレーションシップでデータを整理する基本概念</div></div></div><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-green-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"></path></svg></div><div><div class="font-medium text-slate-800">ER図</div><div class="text-sm text-slate-600">draw.ioを使ったER図の作成方法とテーブル設計の可視化</div></div></div><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-orange-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7c0-2.21-3.582-4-8-4s-8 1.79-8 4z"></path></svg></div><div><div class="font-medium text-slate-800">正規化（1NF〜3NF）</div><div class="text-sm text-slate-600">データの重複を排除し、整合性の高いテーブル設計</div></div></div><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-purple-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></div><div><div class="font-medium text-slate-800">リレーション</div><div class="text-sm text-slate-600">1対1、1対多、多対多の関係性と中間テーブルの活用</div></div></div><div class="flex items-start p-3 bg-slate-50 rounded border border-slate-200"><div class="w-6 h-6 text-red-600 mr-3 mt-0.5"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg></div><div><div class="font-medium text-slate-800">JOIN・GROUP BY</div><div class="text-sm text-slate-600">複数テーブルの結合と集計・分析クエリの実践</div></div></div></div></div></div></div></details></div><div></div></div></main></div></div><script>((storageKey2, restoreKey) => {
    if (!window.history.state || !window.history.state.key) {
      let key = Math.random().toString(32).slice(2);
      window.history.replaceState({ key }, "");
    }
    try {
      let positions = JSON.parse(sessionStorage.getItem(storageKey2) || "{}");
      let storedY = positions[restoreKey || window.history.state.key];
      if (typeof storedY === "number") {
        window.scrollTo(0, storedY);
      }
    } catch (error) {
      console.error(error);
      sessionStorage.removeItem(storageKey2);
    }
  })("react-router-scroll-positions", null)</script><script>window.__reactRouterContext = {"basename":"/gs-textbook-php","future":{"unstable_middleware":false,"unstable_optimizeDeps":false,"unstable_splitRouteModules":false,"unstable_subResourceIntegrity":false,"unstable_viteEnvironmentApi":false},"routeDiscovery":{"mode":"initial"},"ssr":false,"isSpaMode":false};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());</script><script type="module" async="">import "/gs-textbook-php/assets/manifest-3e21a0cd.js";
import * as route0 from "/gs-textbook-php/assets/root-DhgomBNp.js";
import * as route1 from "/gs-textbook-php/assets/lessons._slug-DdYyauY5.js";
  
  window.__reactRouterRouteModules = {"root":route0,"routes/lessons.$slug":route1};

import("/gs-textbook-php/assets/entry.client-DtWayQEr.js");</script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script><!--$?--><template id="B:0"></template><!--/$--><div hidden id="S:0"><script>window.__reactRouterContext.streamController.enqueue("[{\"_1\":2,\"_3\":-5,\"_4\":-5},\"loaderData\",{},\"actionData\",\"errors\"]\n");</script><!--$?--><template id="B:1"></template><!--/$--></div><script>$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data="$!",a.setAttribute("data-dgst",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if("/$"===d)if(0===f)break;else f--;else"$"!==d&&"$?"!==d&&"$!"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data="$"}b._reactRetry&&b._reactRetry()}};$RC("B:0","S:0")</script><div hidden id="S:1"><script>window.__reactRouterContext.streamController.close();</script></div><script>$RC("B:1","S:1")</script></body></html>